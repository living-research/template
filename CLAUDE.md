# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project

Living Research — a GitHub organization and template for publishing research as continuously updated repositories instead of static PDFs. The repository IS the research; the published page is a view of it.

## Repository Layout

This working directory contains three independent git repos for the `living-research` GitHub org:

- `template/` — GitHub template repo (users click "Use this template", not fork)
- `living-research.github.io/` — Landing page and manifesto (single `index.html`)
- `.github/` — GitHub organization profile (`profile/README.md`)

Each has its own `.git`. Run git commands from within the specific subdirectory.

## Template Structure

```
template/
├── data/raw/              # Source data (immutable — never modify)
├── data/processed/        # Derived data (regenerated by CI, gitignored contents)
├── experiments/           # One .py file per analysis
├── docs/                  # Published findings (static HTML) → GitHub Pages
├── .github/workflows/
│   ├── experiments.yml    # Reruns all experiments on push to main
│   └── publish.yml        # Deploys docs/ to GitHub Pages
├── Makefile
├── requirements.txt       # pip dependencies
├── LICENSE                # CC BY 4.0 (text/findings)
└── LICENSE-CODE           # MIT (code)
```

## Commands (from `template/`)

```bash
make run       # Run all experiments/*.py sequentially
make clean     # Delete data/processed/*
```

Python setup:
```bash
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
```

No test runner or linter is configured — add as needed per project.

## GitHub Setup

- `template/` has the GitHub "template repository" flag enabled — users get a "Use this template" button instead of forking.
- `living-research.github.io` has GitHub Pages enabled (deploys from root).
- Template users enable Pages on their own repos after creating from the template.

## CI/CD

- **experiments.yml** triggers on pushes to `main` that touch `data/`, `experiments/`, or `requirements.txt`. Runs `make run` with Python 3.12 and uploads `data/processed/` as artifacts.
- **publish.yml** triggers on pushes to `main` that touch `docs/`. Deploys `docs/` to GitHub Pages.

## Data Flow

`data/raw/` (immutable) → `experiments/*.py` → `data/processed/` (reproduced by CI) → manually update `docs/index.html` with findings → GitHub Pages

## Conventions

- Raw data is immutable. Transformations go to `data/processed/`.
- One script per analysis in `experiments/`.
- Commit messages document reasoning, not just changes — git history is the research record.
- Dual license: CC BY 4.0 for text/findings, MIT for code.

## Design System (docs HTML)

CSS custom properties defined in `docs/index.html`:
- Colors: `--text`, `--text-secondary`, `--bg` (#fafaf8), `--surface` (#f5f5f0), `--accent` (#115e59 teal)
- Spacing: `--space-xs` through `--space-2xl` (asymmetric: 3.5rem, 5rem)
- Max width: `--measure` (38rem)
- Typography: Georgia serif for body, system font stack for UI/labels
- Auto dark mode via `prefers-color-scheme: dark`
